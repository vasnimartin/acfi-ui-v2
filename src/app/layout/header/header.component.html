<header class="site-header">
    <div class="container">
        <div class="header-inner">
            <a routerLink="/" class="logo" (click)="closeMenu()">
                <span class="logo-text">Austin Christian Fellowship of India</span>
                <span class="logo-sub">Mission • Prayer • Children</span>
            </a>

            <button class="mobile-toggle" [class.active]="menuOpen" aria-label="Toggle Navigation"
                (click)="toggleMenu()">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>

            <nav class="main-nav" [class.active]="menuOpen">
                <ul class="nav-list">
                    <li class="nav-item"><a routerLink="/" class="nav-link" (click)="closeMenu()">Home</a></li>

                    <li class="nav-item has-dropdown" [class.active]="activeDropdown === 'about'">
                        <a class="nav-link" (click)="toggleDropdown('about', $event)">About <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a routerLink="/about/who-we-are" (click)="closeMenu()">Who We Are</a></li>
                            <li><a routerLink="/about/vision-mission" (click)="closeMenu()">Vision & Mission</a></li>
                            <li><a routerLink="/about/statement-of-faith" (click)="closeMenu()">Statement of Faith</a>
                            </li>
                            <li><a routerLink="/about/pastors-welcome" (click)="closeMenu()">Pastor's Welcome</a></li>
                            <li><a routerLink="/about/timeline" (click)="closeMenu()">Church Themes</a></li>
                        </ul>
                    </li>

                    <li class="nav-item has-dropdown" [class.active]="activeDropdown === 'ministries'">
                        <a class="nav-link" (click)="toggleDropdown('ministries', $event)">Ministries <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a routerLink="/ministries/children" (click)="closeMenu()">Children</a></li>
                            <li><a routerLink="/ministries/youth" (click)="closeMenu()">Youth</a></li>
                            <li><a routerLink="/ministries/women" (click)="closeMenu()">Women</a></li>
                            <li><a routerLink="/ministries/men" (click)="closeMenu()">Men</a></li>
                            <li><a routerLink="/ministries/music-worship" (click)="closeMenu()">Music & Worship</a></li>
                            <li><a routerLink="/ministries/outreach" (click)="closeMenu()">Outreach</a></li>
                            <li><a routerLink="/ministries/prayer" (click)="closeMenu()">Prayer</a></li>
                        </ul>
                    </li>

                    <li class="nav-item has-dropdown" [class.active]="activeDropdown === 'gatherings'">
                        <a class="nav-link" (click)="toggleDropdown('gatherings', $event)">Gatherings <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a routerLink="/gatherings/sunday-services" (click)="closeMenu()">Sunday Services</a>
                            </li>
                            <li><a routerLink="/gatherings/bible-studies" (click)="closeMenu()">Bible Studies</a></li>
                            <li><a routerLink="/gatherings/monthly-fellowship" (click)="closeMenu()">Monthly
                                    Fellowship</a></li>
                            <li><a routerLink="/gatherings/full-calendar" (click)="closeMenu()">Full Calendar</a></li>
                        </ul>
                    </li>

                    <li class="nav-item has-dropdown" [class.active]="activeDropdown === 'media'">
                        <a class="nav-link" (click)="toggleDropdown('media', $event)">Media <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a href="#" (click)="closeMenu()">Sermons & Videos</a></li>
                            <li><a href="#" (click)="closeMenu()">Weekly Bulletins</a></li>
                            <li><a href="#" (click)="closeMenu()">Photo Gallery</a></li>
                            <li><a href="#" (click)="closeMenu()">Testimonials</a></li>
                            <li><a href="#" (click)="closeMenu()">Devotionals</a></li>
                        </ul>
                    </li>

                    <li class="nav-item has-dropdown" [class.active]="activeDropdown === 'resources'">
                        <a class="nav-link" (click)="toggleDropdown('resources', $event)">Resources <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a routerLink="/jobs" (click)="closeMenu()">Employment</a></li>
                            <li><a routerLink="/resources/lenten-devotionals" (click)="closeMenu()">Lenten Daily
                                    Devotionals 2024</a></li>
                            <li><a routerLink="/resources/bulletins" (click)="closeMenu()">Weekly Bulletins</a></li>
                            <li><a routerLink="/resources/gallery" (click)="closeMenu()">Photo Gallery</a></li>
                            <li><a routerLink="/resources/videos" (click)="closeMenu()">Videos</a></li>
                            <li><a routerLink="/resources/testimonials" (click)="closeMenu()">Testimonials</a></li>
                            <li><a routerLink="/resources/silent-auction" (click)="closeMenu()">Silent Auction</a></li>
                            <li><a routerLink="/resources/archives" (click)="closeMenu()">Archives</a></li>
                            <li><a routerLink="/resources/shop" (click)="closeMenu()">Shop</a></li>
                            <li><a routerLink="/resources/prayer-request" (click)="closeMenu()">Prayer Request</a></li>
                        </ul>
                    </li>

                    <li class="nav-item has-dropdown highlight-item" [class.active]="activeDropdown === 'give'">
                        <a class="nav-link" (click)="toggleDropdown('give', $event)">Give <i
                                class="fa-solid fa-chevron-down"></i></a>
                        <ul class="dropdown">
                            <li><a routerLink="/give/online-giving" (click)="closeMenu()">Online Giving</a></li>
                            <li><a routerLink="/give/building-fund" (click)="closeMenu()">Building Fund</a></li>
                        </ul>
                    </li>

                    <li class="nav-item contact-item">
                        <a routerLink="/contact" class="nav-link" (click)="closeMenu()">Contact</a>
                    </li>

                    <!-- Auth Items -->
                    <li class="nav-item auth-item" *ngIf="!currentUser">
                        <a (click)="login(); closeMenu()" class="nav-link" style="cursor: pointer;">Login</a>
                    </li>

                    <li class="nav-item has-dropdown auth-item" *ngIf="currentUser"
                        [class.active]="activeDropdown === 'user'">
                        <a class="nav-link" (click)="toggleDropdown('user', $event)" style="cursor: pointer;">
                            <span class="user-id" *ngIf="getEmailPrefix(currentUser) as emailPrefix">
                                {{ emailPrefix }}
                                <small *ngIf="!isLoading && currentUserRole" class="role-tag">{{ currentUserRole
                                    }}</small>
                            </span>
                            <!-- Fallback if email is missing -->
                            <span class="user-id" *ngIf="!currentUser?.email">
                                Member
                            </span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </a>
                        <ul class="dropdown">
                            <li><a routerLink="/dashboard" (click)="closeMenu()">My Dashboard</a></li>

                            <!-- Role Based Access Link -->
                            <li *ngIf="!isLoading && currentUserRole && ['admin', 'pastor', 'media'].includes(currentUserRole)"
                                class="role-link-item">
                                <a routerLink="/admin" (click)="closeMenu()">
                                    <i class="fa-solid fa-layer-group"></i> {{ getRoleLabel() }}
                                </a>
                            </li>

                            <!-- Logout -->
                            <li>
                                <a (click)="logout(); closeMenu()" style="cursor: pointer;"
                                    [class.disabled]="isLoggingOut">
                                    <span *ngIf="!isLoggingOut">Logout</span>
                                    <span *ngIf="isLoggingOut"><i class="fa-solid fa-circle-notch fa-spin"></i> Signing
                                        out...</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>